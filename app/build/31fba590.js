System.register(["./5bf6b54b.js"],(function(t){"use strict";var e,o,i,s,l,d,c,p,m,u,h,b,v,y,g,w,$,f,x,k,D,z,W;return{setters:[function(t){e=t.T,o=t.D,i=t.y,s=t.a,l=t.V,d=t.Y,c=t.O,p=t.I,m=t.Z,u=t.J,h=t.Q,b=t.l,v=t.b,y=t.w,g=t.L,w=t.k,$=t.v,f=t.H,x=t.K,k=t.R,D=t.g,z=t.$,W=t._}],execute:function(){t("default",(function App(){x(Dashboard)([])}));var clearSelection=()=>{window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()};const[S,H,Y]=(()=>{let t;const v=e(null),hideDashboardContextmenu=()=>{v.$&&(m(v.$[1].node),v.$=null)};return[function DashboardContextmenu(){const e=i({X:0,Y:0}),resizer=o=>{const i=o.width,s=o.height;let{X:l,Y:d}=e.$;l=t.clientX,d=t.clientY,l+i>window.innerWidth&&(l-=i),d+s>window.innerHeight&&(d-=s),l<0&&(l=0),d<0&&(d=0),e.$={X:l,Y:d}};s(v)((([t,o])=>{l("div",{class:["position-fixed","top-0","bottom-0","start-0","end-0"],"style--z-index":"1"},[u("tapstart-self",hideDashboardContextmenu),u("contextmenu-capture-prevent-stop",[])])(d((()=>{c(window,"resize",hideDashboardContextmenu),clearSelection(),l("div",{class:["position-fixed","animated zoomIn","dropdown-menu dropdown-menu-dark show"],style:"--animate-duration: 0.125s","style--left":b([e],(t=>t[0].X+"px")),"style--top":b([e],(t=>t[0].Y+"px"))},[h(resizer),u("click-prevent-stop",hideDashboardContextmenu)])(d((()=>{t(o)})))})))}))},(e,i)=>s=>o(s.node,"contextmenu-prevent-stop"+(i?"-self":""),(o=>{t=o,v.$=[e,s]})),t=>e=>{for(const o of t)o?l("li")(l("button",{type:"button",class:"dropdown-item"},[u("click",(()=>{o.click(e)}))])(l("span")(p(o.title)),s(o.key)((()=>{l("span",{class:"ms-3 float-end"})(p(o.key))})))):l("li")(l("hr",{class:"dropdown-divider"})())}]})(),resize=()=>{_.set(window)},_=e(window,(()=>(window.addEventListener("resize",resize,!0),()=>{window.removeEventListener("resize",resize,!0)}))),M=e(!1,(t=>v(_,((t,e)=>{e[0]!==(e[0]=t.innerWidth<t.innerHeight)&&(e[1].$=e[0])}),[t.$,t]))),noop=()=>{},T=Math.random,{round:C,ceil:X,floor:I,max:K,min:F}=Math,random=()=>T()||random(),randomTo=(t,e=t)=>C(random()*(e-t)+t),A=parseFloat;var a=t=>{t.stopPropagation(),t.cancelable&&t.preventDefault()},n=t=>{var e=0,o=0;if("touches"in t){var i=t.touches[0];i&&(e=i.clientX,o=i.clientY)}else e=t.clientX,o=t.clientY;return[e,o]},r=(t,e,o)=>{var i=1;e<0&&(e=-e),t<0&&(i=-1,t=-t);var s=(t+=e)%e;t-=s+e;var l=i>0?s>=e/2:s>e/2;return l&&(t+=e),o&&(t+=e*o*i,s&&i>0!==(o<0&&!l||o>0&&l)||(t-=(o>0?e:-e)*i)),t&&t*i};const j=e(50),B=e({W:2,H:2},(t=>y([_,j],(([t,e],[o,i])=>{const s=t.innerWidth,l=t.innerHeight,d=s/e,c=r(d,6)||r(d,4)||r(d,3)||2,p=l/(s/c),m=100/c,u=100/(r(p,6)||r(p,4)||r(p,3)||2);o.W===m&&o.H===u||(o.W=m,o.H=u,i.next(o))}),[t.$,t]))),E=e(null),L=e(null);let P=1;const Q={},R={},visibleAllWindows=()=>{for(const t in R)R[t].$=!1},collapseAllWindows=()=>{for(const t in R)R[t].$=!0},title_btn=(t,e,o)=>{l("button",{type:"button",class:["btn btn-sm bg-white text-"+e,"p-0 lh-1 rounded-pill","d-inline-flex justify-content-center align-items-center align-content-center"],style:"width:1.625em;height:1.625em;margin-left:0.625em;"},[u("click",o)])(l("i",{role:"img","aria-label":t,class:b([t],(t=>[`bi-${t[0]}-circle-fill`])),style:"font-size:1.8em;"})())},resize_div=(t,e)=>{l("div",{style:`position:absolute;z-index:1;cursor:${t}-resize;${e}`,"data-resize":t})()},q=e(""),setSize=(t,e)=>100/A(t)*e;function DesktopWindow({component:t,componentProps:e,title:c,isFullscreen:h,top:v,left:y,right:D,bottom:z}={}){const W=this,S=W.pub;S.component=t;const _=S.id="w"+randomTo(1e16,9e16).toString(36),M=randomTo(30,50),T=randomTo(30,50);null==v&&(v=randomTo(0,100-T)),null==y&&(y=randomTo(0,100-M)),null==D&&(D=randomTo(0,100-M-y)),null==z&&(z=randomTo(0,100-T-v));const setTop=t=>v=r(K(t,0),B.$.H),setLeft=t=>y=r(F(t,100-B.$.W),B.$.W),setRight=t=>D=r(F(t,100-B.$.W),B.$.W),setBottom=t=>z=r(F(t,100-B.$.H),B.$.H);setTop(v),setLeft(y),setRight(D),setBottom(z);const C=S.$title=i("");g(c,(t=>{C.$=""+(t||_)}));const X=i(""),I=i(""),j=i(!1),O=S.$isFullscreen=i(!!h);w(O,((t,[e,o,i])=>{t?(o.$="Восстановить",e.$="arrow-down-left"):(o.$="Развернуть",e.$="arrow-up-right"),i.$=!0,setTimeout((()=>{i.$=!1}),250)}),[X,I,j]);const J=Q[_]=i(++P);$((()=>{delete Q[_]}));const V=S.$isHovered=i(!1),Z=S.$isFocused=i(!1);w(V,((t,[e])=>{(e.pub.isHovered=t)!==(E.$===e)&&(E.$=t?e:null)}),[W]),w(Z,((t,[e,o])=>{(e.pub.isFocused=t)!==(L.$===e)&&(L.$=t?(((t,e)=>{if(P>4e9){P=1;for(const t in Q)Q[t].$=++P;t.$=++P}else P!==t.$&&(t.$=++P);E.$=L.$=e})(o,e),e):null)}),[W,J]),w(E,((t,[e,o])=>{o.$=t===e}),[W,V]),w(L,((t,[e,o])=>{o.$=t===e}),[W,Z]);const G=R[_]=S.$isCollapsed=i(!1);$((()=>{delete R[_]}));const N=i(!1);w(G,(t=>{t?(m(),setTimeout((()=>{N.$=!0}),250)):N.$=!1}));const windowClose=()=>{m(),k(this)},toggleFullscreen=()=>{O.$=!O.$},toggleCollapsed=()=>{G.$=!G.$};var U,tt;l("div",{id:_,class:b([G,N],(t=>["card","position-absolute","bg-dark text-white","animated",t[1]&&"d-none",t[0]?"zoomOut":"zoomIn"])),style:b([j,B,O],(t=>["--animate-duration:0.25s",{top:(t[2]?0:v)+"%",left:(t[2]?0:y)+"%",right:(t[2]?0:D)+"%",bottom:(t[2]?0:z)+"%",minWidth:t[1].W+"%",minHeight:t[1].H+"%"},t[0]&&"transition: all 0.25s"])),"style--zIndex":J},[u("inhover",(()=>{V.$=!0})),u("infocus",(()=>{Z.$=!0})),u("unhover",(()=>{V.$=!1})),u("unfocus",(()=>{Z.$=!1})),(U=(t,e)=>{const[o,i,s,l,d,c]=t.detail;var p,m,u;if("start"!==t.type||i.$||(o[0]=(p=t.event.target,m="resize",p.getAttribute("data-"+m))),o[0]){const i=o[0],p=e.node;let m,h,b,v,y;if("start"===t.type?(m=getComputedStyle(p),u="move"===i?i:i+"-resize",q.$=u):m=p.style,"move"!==i&&"n"!==i[0]||(h=A(m.top)+t.delta.y),"move"!==i&&"w"!==i&&"w"!==i[1]||(b=A(m.left)+t.delta.x),"move"!==i&&"e"!==i&&"e"!==i[1]||(v=A(m.right)-t.delta.x),"move"!==i&&"s"!==i[0]||(y=A(m.bottom)-t.delta.y),m=p.style,"end"===t.type){o[0]=null,q.$="";const t=getComputedStyle(p.parentElement);"move"!==i&&"n"!==i[0]||(m.top=s(setSize(t.height,h))+"%"),"move"!==i&&"w"!==i&&"w"!==i[1]||(m.left=l(setSize(t.width,b))+"%"),"move"!==i&&"e"!==i&&"e"!==i[1]||(m.right=d(setSize(t.width,v))+"%"),"move"!==i&&"s"!==i[0]||(m.bottom=c(setSize(t.height,y))+"%")}else clearSelection(),"move"!==i&&"n"!==i[0]||(m.top=h+"px"),"move"!==i&&"w"!==i&&"w"!==i[1]||(m.left=b+"px"),"move"!==i&&"e"!==i&&"e"!==i[1]||(m.right=v+"px"),"move"!==i&&"s"!==i[0]||(m.bottom=y+"px")}},tt=[[null],O,setTop,setLeft,setRight,setBottom],t=>{var e=t.node,i={ctx:t,isDown:!1,isMove:!1,dx:0,dy:0,ox:0,oy:0},s=[o(e,"tapstart-capture",((t,e)=>{var o=t.detail.event;e.isDown=!0,e.isMove=!1,e.ox=e.oy=0,[e.dx,e.dy]=n(o)}),i),o(document,"tapmove-capture",((t,e)=>{var o=t.detail.event;if(e.isMove){var[i,s]=n(o),l=i-e.dx,d=s-e.dy;e.ox+=l,e.oy+=d,a(o),U({type:"move",event:o,detail:tt,delta:{x:l,y:d},offset:{x:e.ox,y:e.oy}},e.ctx),e.dx=i,e.dy=s}else e.isDown&&(e.isDown=!1,e.isMove=!0,a(o),U({type:"start",event:o,detail:tt,delta:{x:0,y:0},offset:{x:0,y:0}},e.ctx))}),i),o(document,"tapend-capture",((t,e)=>{if(e.isMove){var o=t.detail.event;e.isDown=e.isMove=!1,a(o),U({type:"end",event:o,detail:tt,delta:{x:0,y:0},offset:{x:e.ox,y:e.oy}},e.ctx)}else e.isDown&&(e.isDown=!1)}),i)];return()=>{for(var t=s.length;t-- >0;)s[t]()}})])(l("div",{class:b([Z],(t=>["card-header","d-flex align-items-center","p-1 overflow-hidden user-select-none",t[0]?"bg-primary":"bg-secondary"])),style:"z-index:1","style--opacity":b([V],(t=>t[0]?1:.875))},[H(Y([{title:"Свернуть",click:toggleCollapsed},{title:I,click:toggleFullscreen},,{title:"Закрыть",click:windowClose}]))])(l("div",{class:["flex-fill","text-truncate","px-1"],style:"margin-bottom:-0.0625em","data-resize":"move"},[u("dblclick",toggleFullscreen)])(p(C)),l("div",{class:"text-nowrap"})(f((title_btn("dash","dark",toggleCollapsed),title_btn(X,"dark",toggleFullscreen),title_btn("x","danger",windowClose))))),l("div",{class:["card-body","position-relative"],"style--z-index":"1"})(l("div",{style:"z-index:1;position:absolute;top:2px;bottom:2px;left:2px;right:2px;"})(d((()=>{S.component?x(S.component,{...e||{}})([]):f("empty")}))),l("div",{class:["position-absolute","top-0","start-0","w-100","h-100"],"style--display":b([Z],(t=>t[0]?"none":"block")),"style--backgroundColor":"rgba(0,0,0,0.125)","style--z-index":"1"},[u("contextmenu-prevent-stop",noop)])()),s(b([O],(t=>!t[0])))((()=>{resize_div("n","top:-0.25em;left:0;width:100%;height:0.5em;"),resize_div("s","bottom:-0.25em;left:0;width:100%;height:0.5em;"),resize_div("w","top:0;left:-0.25em;width:0.5em;height:100%;"),resize_div("e","top:0;right:-0.25em;width:0.5em;height:100%;"),resize_div("nw","top:-0.375em;left:-0.375em;width:0.75em;height:0.75em;"),resize_div("ne","top:-0.375em;right:-0.375em;width:0.75em;height:0.75em;"),resize_div("sw","bottom:-0.375em;left:-0.375em;width:0.75em;height:0.75em;"),resize_div("se","bottom:-0.375em;right:-0.375em;width:0.75em;height:0.75em;")})))}function DashboardTopbarSettings(){l("div")(f("DashboardTopbarSettings"))}function DashboardTopbar(){l("div",{class:["position-absolute","w-100","top-0","left-0"],"style--z-index":"1","style--height":"2em","style--backgroundColor":"rgba(0,0,0,0.75)"},[H(Y([{title:"Настройки панели",click:t=>{D(t.root.pub.DashboardDesktop,(()=>{x(DesktopWindow,{title:"Настройки панели",component:DashboardTopbarSettings})([])}),[])}},,{title:"Показать все окна",click:visibleAllWindows},{title:"Свернуть все окна",click:collapseAllWindows}]))])()}function DashboardDesktopSettings(){l("div")(z("qweqwe"),f("DashboardDesktopSettings"))}const O=e([]),changeBackground=()=>{O.$=(()=>{const t=[],e=30*randomTo(1,11);let o=randomTo(0,360),i=o+30;for(let s=9;s-- >0;)t.push([randomTo(0,360),99*random(),randomTo(o,i)]),o+=e,i+=e;return t})()};function DashboardDesktop(){l("div",{class:["position-absolute","bottom-0","start-0","end-0"],"style--z-index":"1","style--top":"2em"})(f((this.root.pub.DashboardDesktop=W(),"")),l("div",{class:b([M],(t=>["w-auto h-auto","position-absolute top-0 start-0 end-0 bottom-0","d-flex flex-wrap align-items-start align-content-start justify-content-center","overflow-auto",t[0]?"flex-column":"flex-row"])),"style--z-index":"1"},[u("wheel",((t,e)=>{if(!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)){const o=e.node;if(o.scrollBy){t.preventDefault();const e=t.deltaY;M.$?o.scrollBy(e,0):o.scrollBy(0,e)}}})),H(Y([{title:"Создать файл",click:()=>{}},{title:"Создать папку",click:()=>{}},,{title:"Настройки",click:t=>{D(t.root.pub.DashboardDesktop,(()=>{x(DesktopWindow,{title:"Параметры рабочего стола",component:DashboardDesktopSettings})([])}),[])}},,{title:"Показать все окна",click:visibleAllWindows},{title:"Свернуть все окна",click:collapseAllWindows},,{title:"__Изменить фон__",key:"(Q)",click:changeBackground},{title:"__Создать пустое окно__",click:t=>{D(t.root.pub.DashboardDesktop,(()=>{x(DesktopWindow)([])}),[])}}]))])()),(t=>{const e="rgba(128,128,128,0.25)",o=`linear-gradient(to right, ${e} 1px,transparent 1px),linear-gradient(to bottom,${e} 1px,transparent 1px)`;l("div",{class:["position-absolute","bottom-0","start-0","end-0"],style:b([B,q,t],(t=>["z-index:1",{top:t[2],cursor:t[1],display:t[1]?"block":"none",backgroundImage:o,backgroundSize:`${t[0].W}% ${t[0].H}%`}]))},[u("contextmenu-prevent-stop",noop)])()})("2em")}function Dashboard(){l("div",{class:["position-fixed","w-100","h-100","top-0","start-0"]})(l("div",{class:"dashboard",style:"position:absolute;top:-20px;bottom:-20px;left:-20px;right:-20px;","style--backgroundColor":"#000","style--backgroundImage":b([O],(t=>((t,e,o)=>{const i=[];for(let s,l=t.length;l-- >0;)s=t[l],i.push(`linear-gradient(${s[0]}deg, ${l?"transparent 0%":`hsl(${s[2]+-45},${e}%,${o}%) 0%`}, hsl(${s[2]},${e}%,${o}%) ${s[1]}%, ${l?`transparent ${s[1]+.25}%`:`hsl(${s[2]+45},${e}%,${o}%) 100%`})`);return""+i})(t[0],100,50)))})(),x(DashboardTopbar)([]),x(DashboardDesktop)([]),x(S)([]))}changeBackground(),o(null,"KeyQ",(()=>{changeBackground()}))}}}));